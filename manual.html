<!DOCTYPE html>
<html lang="en-US">

<head>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>User Manual</title>
  <meta name="description"
    content="rust-analyzer: building a better Rust IDE">

  <link rel="stylesheet" href="/css/asciidoctor.css">
  <link rel="stylesheet" href="/css/rouge-github.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">

  <link rel="canonical" href="https://rust-analyzer.github.io//manual.html">
  <link rel="alternate" type="application/rss+xml" title="rust-analyzer"
    href="https://rust-analyzer.github.io//feed.xml">

  <link rel="apple-touch-icon" sizes="180x180" href="/assets/fav/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/fav/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/fav/favicon-16x16.png">
  <link rel="manifest" href="/assets/site.webmanifest">
  <link rel="mask-icon" href="/assets/fav/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="theme-color" content="#ffffff">
</head>

<body>
  
  <header>
    <div id="header-inner">
      <div id="header-left">
        <a class="site-title" href="/">
          <img src="/assets/rust-analyzer.svg" alt="rust analyzer" id="header-logo">
        </a>
      </div>
      <div id="header-right">
        <a class="nav-link" href="https://opencollective.com/rust-analyzer/">Sponsor</a>
        <a class="nav-link" href="/manual.html">Docs</a>
        <a class="nav-link" href="/blog">Blog</a>
        <a class="nav-link" href="/thisweek">Changelog</a>
      </div>
    </div>
  </header>
  

  <main>
    <article>
<h1>User Manual</h1>
<div class="post-meta sect1">
  
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>At its core, rust-analyzer is a <strong>library</strong> for semantic analysis of Rust code as it changes over time.
This manual focuses on a specific usage of the library&#8201;&#8212;&#8201;running it as part of a server that implements the
<a href="https://microsoft.github.io/language-server-protocol/">Language Server Protocol</a> (LSP).
The LSP allows various code editors, like VS Code, Emacs or Vim, to implement semantic features like completion or goto definition by talking to an external language server process.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph lead">
<p>To improve this document, send a pull request:<br>
<a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/docs/user/manual.adoc">https://github.com/rust-analyzer/&#8230;&#8203;/manual.adoc</a></p>
</div>
<div class="paragraph">
<p>The manual is written in <a href="https://asciidoc.org">AsciiDoc</a> and includes some extra files which are generated from the source code. Run <code>cargo test</code> and <code>cargo xtask codegen</code> to create these and then <code>asciidoctor manual.adoc</code> to create an HTML copy.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have questions about using rust-analyzer, please ask them in the <a href="https://users.rust-lang.org/c/ide/14">&#8220;IDEs and Editors&#8221;</a> topic of Rust users forum.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#vs-code">VS Code</a></li>
<li><a href="#rust-analyzer-language-server-binary">rust-analyzer Language Server Binary</a></li>
<li><a href="#emacs">Emacs</a></li>
<li><a href="#vimneovim">Vim/NeoVim</a></li>
<li><a href="#sublime-text-3">Sublime Text 3</a></li>
<li><a href="#gnome-builder">GNOME Builder</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#non-cargo-based-projects">Non-Cargo Based Projects</a></li>
<li><a href="#features">Features</a>
<ul class="sectlevel2">
<li><a href="#auto-import">Auto Import</a></li>
<li><a href="#expand-macro-recursively">Expand Macro Recursively</a></li>
<li><a href="#extend-selection">Extend Selection</a></li>
<li><a href="#file-structure">File Structure</a></li>
<li><a href="#format-string-completion">Format String Completion.</a></li>
<li><a href="#fuzzy-completion-and-autoimports">Fuzzy Completion and Autoimports</a></li>
<li><a href="#go-to-definition">Go to Definition</a></li>
<li><a href="#go-to-implementation">Go to Implementation</a></li>
<li><a href="#go-to-type-definition">Go to Type Definition</a></li>
<li><a href="#hover">Hover</a></li>
<li><a href="#inlay-hints">Inlay Hints</a></li>
<li><a href="#join-lines">Join Lines</a></li>
<li><a href="#magic-completions">Magic Completions</a></li>
<li><a href="#matching-brace">Matching Brace</a></li>
<li><a href="#memory-usage">Memory Usage</a></li>
<li><a href="#on-enter">On Enter</a></li>
<li><a href="#on-typing-assists">On Typing Assists</a></li>
<li><a href="#parent-module">Parent Module</a></li>
<li><a href="#run">Run</a></li>
<li><a href="#semantic-syntax-highlighting">Semantic Syntax Highlighting</a></li>
<li><a href="#show-syntax-tree">Show Syntax Tree</a></li>
<li><a href="#status">Status</a></li>
<li><a href="#structural-search-and-replace">Structural Search and Replace</a></li>
<li><a href="#view-hir">View Hir</a></li>
<li><a href="#workspace-symbol">Workspace Symbol</a></li>
</ul>
</li>
<li><a href="#assists-code-actions">Assists (Code Actions)</a></li>
<li><a href="#diagnostics">Diagnostics</a>
<ul class="sectlevel2">
<li><a href="#break-outside-of-loop">break-outside-of-loop</a></li>
<li><a href="#inactive-code">inactive-code</a></li>
<li><a href="#incorrect-ident-case">incorrect-ident-case</a></li>
<li><a href="#macro-error">macro-error</a></li>
<li><a href="#mismatched-arg-count">mismatched-arg-count</a></li>
<li><a href="#missing-match-arm">missing-match-arm</a></li>
<li><a href="#missing-ok-in-tail-expr">missing-ok-in-tail-expr</a></li>
<li><a href="#missing-pat-fields">missing-pat-fields</a></li>
<li><a href="#missing-structure-fields">missing-structure-fields</a></li>
<li><a href="#missing-unsafe">missing-unsafe</a></li>
<li><a href="#no-such-field">no-such-field</a></li>
<li><a href="#unresolved-extern-crate">unresolved-extern-crate</a></li>
<li><a href="#unresolved-import">unresolved-import</a></li>
<li><a href="#unresolved-module">unresolved-module</a></li>
<li><a href="#unresolved-proc-macro">unresolved-proc-macro</a></li>
</ul>
</li>
<li><a href="#editor-features">Editor Features</a>
<ul class="sectlevel2">
<li><a href="#vs-code-2">VS Code</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a>Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In theory, one should be able to just install the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a> and have it automatically work with any editor.
We are not there yet, so some editor specific setup is required.</p>
</div>
<div class="paragraph">
<p>Additionally, rust-analyzer needs the sources of the standard library.
If the source code is not present, rust-analyzer will attempt to install it automatically.</p>
</div>
<div class="paragraph">
<p>To add the sources manually, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>rustup component add rust-src
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="vs-code"><a class="anchor" href="#vs-code"></a>VS Code</h3>
<div class="paragraph">
<p>This is the best supported editor at the moment.
The rust-analyzer plugin for VS Code is maintained
<a href="https://github.com/rust-analyzer/rust-analyzer/tree/master/editors/code">in tree</a>.</p>
</div>
<div class="paragraph">
<p>You can install the latest release of the plugin from
<a href="https://marketplace.visualstudio.com/items?itemName=matklad.rust-analyzer">the marketplace</a>.</p>
</div>
<div class="paragraph">
<p>Note that the plugin may cause conflicts with the
<a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">official Rust plugin</a>.
It is recommended to disable the Rust plugin when using the rust-analyzer extension.</p>
</div>
<div class="paragraph">
<p>By default, the plugin will prompt you to download the matching version of the server as well:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://user-images.githubusercontent.com/9021944/75067008-17502500-54ba-11ea-835a-f92aac50e866.png" alt="75067008 17502500 54ba 11ea 835a f92aac50e866">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To disable this notification put the following to <code>settings.json</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.updates.askBeforeDownload"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The server binary is stored in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux: <code>~/.config/Code/User/globalStorage/matklad.rust-analyzer</code></p>
</li>
<li>
<p>Linux (Remote, such as WSL): <code>~/.vscode-server/data/User/globalStorage/matklad.rust-analyzer</code></p>
</li>
<li>
<p>macOS: <code>~/Library/Application\ Support/Code/User/globalStorage/matklad.rust-analyzer</code></p>
</li>
<li>
<p>Windows: <code>%APPDATA%\Code\User\globalStorage\matklad.rust-analyzer</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that we only support two most recent versions of VS Code.</p>
</div>
<div class="sect3">
<h4 id="updates"><a class="anchor" href="#updates"></a>Updates</h4>
<div class="paragraph">
<p>The extension will be updated automatically as new versions become available.
It will ask your permission to download the matching language server version binary if needed.</p>
</div>
<div class="sect4">
<h5 id="nightly"><a class="anchor" href="#nightly"></a>Nightly</h5>
<div class="paragraph">
<p>We ship nightly releases for VS Code.
To help us out with testing the newest code and follow the bleeding edge of our <code>master</code>, please use the following config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.updates.channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"nightly"</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You will be prompted to install the <code>nightly</code> extension version.
Just click <code>Download now</code> and from that moment you will get automatic updates every 24 hours.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t want to be asked for <code>Download now</code> every day when the new nightly version is released add the following to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.updates.askBeforeDownload"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nightly extension should <strong>only</strong> be installed via the <code>Download now</code> action from VS Code.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="manual-installation"><a class="anchor" href="#manual-installation"></a>Manual installation</h4>
<div class="paragraph">
<p>Alternatively, procure both <code>rust-analyzer.vsix</code> and your platform&#8217;s matching <code>rust-analyzer-{platform}</code>, for example from the
<a href="https://github.com/rust-analyzer/rust-analyzer/releases">releases</a> page.</p>
</div>
<div class="paragraph">
<p>Install the extension with the <code>Extensions: Install from VSIX</code> command within VS Code, or from the command line via:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>$ code --install-extension /path/to/rust-analyzer.vsix
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy the <code>rust-analyzer-{platform}</code> binary anywhere, then add the path to your settings.json, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="p">{</span><span class="w"> </span><span class="nl">"rust-analyzer.serverPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~/.local/bin/rust-analyzer-linux"</span><span class="w"> </span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="building-from-source"><a class="anchor" href="#building-from-source"></a>Building From Source</h4>
<div class="paragraph">
<p>Alternatively, both the server and the Code plugin can be installed from source:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre>$ git clone https://github.com/rust-analyzer/rust-analyzer.git &amp;&amp; cd rust-analyzer
$ cargo xtask install
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll need Cargo, nodejs and npm for this.</p>
</div>
<div class="paragraph">
<p>Note that installing via <code>xtask install</code> does not work for VS Code Remote, instead you&#8217;ll need to install the <code>.vsix</code> manually.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re not using Code, you can compile and install only the LSP server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre>$ cargo xtask install --server
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting</h4>
<div class="paragraph">
<p>Here are some useful self-diagnostic commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Rust Analyzer: Show RA Version</strong> shows the version of <code>rust-analyzer</code> binary.</p>
</li>
<li>
<p><strong>Rust Analyzer: Status</strong> prints some statistics about the server, and dependency information for the current file.</p>
</li>
<li>
<p>To enable server-side logging, run with <code>env RA_LOG=info</code> and see <code>Output &gt; Rust Analyzer Language Server</code> in VS Code&#8217;s panel.</p>
</li>
<li>
<p>To log project loading (sysroot &amp; <code>cargo metadata</code>), set <code>RA_LOG=project_model=debug</code>.</p>
</li>
<li>
<p>To log all LSP requests, add <code>"rust-analyzer.trace.server": "verbose"</code> to the settings and look for <code>Rust Analyzer Language Server Trace</code> in the panel.</p>
</li>
<li>
<p>To enable client-side logging, add <code>"rust-analyzer.trace.extension": true</code> to the settings and open <code>Output &gt; Rust Analyzer Client</code> in the panel.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rust-analyzer-language-server-binary"><a class="anchor" href="#rust-analyzer-language-server-binary"></a>rust-analyzer Language Server Binary</h3>
<div class="paragraph">
<p>Other editors generally require the <code>rust-analyzer</code> binary to be in <code>$PATH</code>.
You can download the pre-built binary from the <a href="https://github.com/rust-analyzer/rust-analyzer/releases">releases</a> page.
Typically, you then need to rename the binary for your platform, e.g. <code>rust-analyzer-mac</code> if you&#8217;re on Mac OS, to <code>rust-analyzer</code> and make it executable in addition to moving it into a directory in your <code>$PATH</code>.</p>
</div>
<div class="paragraph">
<p>On Linux to install the <code>rust-analyzer</code> binary into <code>~/.local/bin</code>, this commands could be used</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nv">$ </span>curl <span class="nt">-L</span> https://github.com/rust-analyzer/rust-analyzer/releases/latest/download/rust-analyzer-linux <span class="nt">-o</span> ~/.local/bin/rust-analyzer
<span class="nv">$ </span><span class="nb">chmod</span> +x ~/.local/bin/rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure <code>~/.local/bin</code> is listed in the <code>$PATH</code> variable.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can install it from source using the command below.
You&#8217;ll need the latest stable version of the Rust toolchain.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nv">$ </span>git clone https://github.com/rust-analyzer/rust-analyzer.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>rust-analyzer
<span class="nv">$ </span>cargo xtask <span class="nb">install</span> <span class="nt">--server</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>If your editor can&#8217;t find the binary even though the binary is on your <code>$PATH</code>, the likely explanation is that it doesn&#8217;t see the same <code>$PATH</code> as the shell, see <a href="https://github.com/rust-analyzer/rust-analyzer/issues/1811">this issue</a>.
On Unix, running the editor from a shell or changing the <code>.desktop</code> file to set the environment should help.</p>
</div>
<div class="sect3">
<h4 id="arch-linux"><a class="anchor" href="#arch-linux"></a>Arch Linux</h4>
<div class="paragraph">
<p>The <code>rust-analyzer</code> binary can be installed from the repos or AUR (Arch User Repository):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.archlinux.org/packages/community/x86_64/rust-analyzer/"><code>rust-analyzer</code></a> (built from latest tagged source)</p>
</li>
<li>
<p><a href="https://aur.archlinux.org/packages/rust-analyzer-git"><code>rust-analyzer-git</code></a> (latest Git version)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Install it with pacman, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="nv">$ </span>pacman <span class="nt">-S</span> rust-analyzer
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="emacs"><a class="anchor" href="#emacs"></a>Emacs</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</div>
<div class="paragraph">
<p>Emacs support is maintained as part of the <a href="https://github.com/emacs-lsp/lsp-mode">Emacs-LSP</a> package in <a href="https://github.com/emacs-lsp/lsp-mode/blob/master/lsp-rust.el">lsp-rust.el</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the most recent version of <code>emacs-lsp</code> package by following the <a href="https://github.com/emacs-lsp/lsp-mode">Emacs-LSP instructions</a>.</p>
</li>
<li>
<p>Set <code>lsp-rust-server</code> to <code>'rust-analyzer</code>.</p>
</li>
<li>
<p>Run <code>lsp</code> in a Rust buffer.</p>
</li>
<li>
<p>(Optionally) bind commands like <code>lsp-rust-analyzer-join-lines</code>, <code>lsp-extend-selection</code> and <code>lsp-rust-analyzer-expand-macro</code> to keys.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="vimneovim"><a class="anchor" href="#vimneovim"></a>Vim/NeoVim</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.
Not needed if the extension can install/update it on its own, coc-rust-analyzer is one example.</p>
</div>
<div class="paragraph">
<p>The are several LSP client implementations for vim or neovim:</p>
</div>
<div class="sect3">
<h4 id="coc-rust-analyzer"><a class="anchor" href="#coc-rust-analyzer"></a>coc-rust-analyzer</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install coc.nvim by following the instructions at
<a href="https://github.com/neoclide/coc.nvim">coc.nvim</a>
(Node.js required)</p>
</li>
<li>
<p>Run <code>:CocInstall coc-rust-analyzer</code> to install
<a href="https://github.com/fannheyward/coc-rust-analyzer">coc-rust-analyzer</a>,
this extension implements <em>most</em> of the features supported in the VSCode extension:</p>
<div class="ulist">
<ul>
<li>
<p>automatically install and upgrade stable/nightly releases</p>
</li>
<li>
<p>same configurations as VSCode extension, <code>rust-analyzer.serverPath</code>, <code>rust-analyzer.cargo.features</code> etc.</p>
</li>
<li>
<p>same commands too, <code>rust-analyzer.analyzerStatus</code>, <code>rust-analyzer.ssr</code> etc.</p>
</li>
<li>
<p>inlay hints for variables and method chaining, <em>Neovim Only</em></p>
</li>
<li>
<p>semantic highlighting is not implemented yet</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="languageclient-neovim"><a class="anchor" href="#languageclient-neovim"></a>LanguageClient-neovim</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install LanguageClient-neovim by following the instructions
<a href="https://github.com/autozimu/LanguageClient-neovim">here</a></p>
<div class="ulist">
<ul>
<li>
<p>The GitHub project wiki has extra tips on configuration</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure by adding this to your vim/neovim config file (replacing the existing Rust-specific line if it exists):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:LanguageClient_serverCommands</span> <span class="p">=</span> <span class="p">{</span>
<span class="se">\</span> <span class="s1">'rust'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust-analyzer'</span><span class="p">],</span>
<span class="se">\</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="youcompleteme"><a class="anchor" href="#youcompleteme"></a>YouCompleteMe</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install YouCompleteMe by following the instructions
<a href="https://github.com/ycm-core/lsp-examples#rust-rust-analyzer">here</a></p>
</li>
<li>
<p>Configure by adding this to your vim/neovim config file (replacing the existing Rust-specific line if it exists):</p>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:ycm_language_server</span> <span class="p">=</span>
<span class="se">\</span> <span class="p">[</span>
<span class="se">\</span>   <span class="p">{</span>
<span class="se">\</span>     <span class="s1">'name'</span><span class="p">:</span> <span class="s1">'rust'</span><span class="p">,</span>
<span class="se">\</span>     <span class="s1">'cmdline'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust-analyzer'</span><span class="p">],</span>
<span class="se">\</span>     <span class="s1">'filetypes'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'rust'</span><span class="p">],</span>
<span class="se">\</span>     <span class="s1">'project_root_files'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Cargo.toml'</span><span class="p">]</span>
<span class="se">\</span>   <span class="p">}</span>
<span class="se">\</span> <span class="p">]</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="ale"><a class="anchor" href="#ale"></a>ALE</h4>
<div class="paragraph">
<p>To use the LSP server in <a href="https://github.com/dense-analysis/ale">ale</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="vim"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">g:ale_linters</span> <span class="p">=</span> <span class="p">{</span><span class="s1">'rust'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'analyzer'</span><span class="p">]}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="nvim-lsp"><a class="anchor" href="#nvim-lsp"></a>nvim-lsp</h4>
<div class="paragraph">
<p>NeoVim 0.5 (not yet released) has built-in language server support.
For a quick start configuration of rust-analyzer, use <a href="https://github.com/neovim/nvim-lspconfig#rust_analyzer">neovim/nvim-lspconfig</a>.
Once <code>neovim/nvim-lspconfig</code> is installed, use <code>lua require'nvim_lsp'.rust_analyzer.setup({})</code> in your <code>init.vim</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sublime-text-3"><a class="anchor" href="#sublime-text-3"></a>Sublime Text 3</h3>
<div class="paragraph">
<p>Prerequisites: You have installed the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a>.</p>
</div>
<div class="paragraph">
<p>You also need the <code>LSP</code> package.
To install it:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you&#8217;ve never installed a Sublime Text package, install Package Control:</p>
<div class="ulist">
<ul>
<li>
<p>Open the command palette (Win/Linux: <code>ctrl+shift+p</code>, Mac: <code>cmd+shift+p</code>)</p>
</li>
<li>
<p>Type <code>Install Package Control</code>, press enter</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the command palette, run <code>Package control: Install package</code>, and in the list that pops up, type <code>LSP</code> and press enter.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Finally, with your Rust project open, in the command palette, run <code>LSP: Enable Language Server In Project</code> or <code>LSP: Enable Language Server Globally</code>, then select <code>rust-analyzer</code> in the list that pops up to enable the rust-analyzer LSP.
The latter means that rust-analyzer is enabled by default in Rust projects.</p>
</div>
<div class="paragraph">
<p>If it worked, you should see "rust-analyzer, Line X, Column Y" on the left side of the bottom bar, and after waiting a bit, functionality like tooltips on hovering over variables should become available.</p>
</div>
<div class="paragraph">
<p>If you get an error saying <code>No such file or directory: 'rust-analyzer'</code>, see the <a href="#rust-analyzer-language-server-binary"><code>rust-analyzer</code> binary</a> section on installing the language server binary.</p>
</div>
</div>
<div class="sect2">
<h3 id="gnome-builder"><a class="anchor" href="#gnome-builder"></a>GNOME Builder</h3>
<div class="paragraph">
<p>GNOME Builder 3.37.1 and newer has native <code>rust-analyzer</code> support.
If the LSP binary is not available, GNOME Builder can install it when opening a Rust file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/rust-analyzer/src/config.rs">config.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer is configured via LSP messages, which means that it&#8217;s up to the editor to decide on the exact format and location of configuration files.
Please consult your editor&#8217;s documentation to learn how to configure LSP servers.</p>
</div>
<div class="paragraph">
<p>To verify which configuration is actually used by rust-analyzer, set <code>RA_LOG</code> environment variable to <code>rust_analyzer=info</code> and look for config-related messages.
Logs should show both the JSON that rust-analyzer sees as well as the updated config.</p>
</div>
<div class="paragraph">
<p>This is the list of config options rust-analyzer supports:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">rust-analyzer.assist.importMergeBehaviour (default: <code>"full"</code>)</dt>
<dd>
<p>The strategy to use when inserting new imports or merging imports.</p>
</dd>
<dt class="hdlist1">rust-analyzer.assist.importPrefix (default: <code>"plain"</code>)</dt>
<dd>
<p>The path structure for newly inserted paths to use.</p>
</dd>
<dt class="hdlist1">rust-analyzer.callInfo.full (default: <code>true</code>)</dt>
<dd>
<p>Show function name and docs in parameter hints.</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.autoreload (default: <code>true</code>)</dt>
<dd>
<p>Automatically refresh project info via <code>cargo metadata</code> on  <code>Cargo.toml</code> changes.</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.allFeatures (default: <code>false</code>)</dt>
<dd>
<p>Activate all available features.</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.features (default: <code>[]</code>)</dt>
<dd>
<p>List of features to activate.</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.loadOutDirsFromCheck (default: <code>false</code>)</dt>
<dd>
<p>Run <code>cargo check</code> on startup to get the correct value for package  OUT_DIRs.</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.noDefaultFeatures (default: <code>false</code>)</dt>
<dd>
<p>Do not activate the <code>default</code> feature.</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.target (default: <code>null</code>)</dt>
<dd>
<p>Compilation target (target triple).</p>
</dd>
<dt class="hdlist1">rust-analyzer.cargo.noSysroot (default: <code>false</code>)</dt>
<dd>
<p>Internal config for debugging, disables loading of sysroot crates.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.enable (default: <code>true</code>)</dt>
<dd>
<p>Run specified <code>cargo check</code> command for diagnostics on save.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.allFeatures (default: <code>null</code>)</dt>
<dd>
<p>Check with all features (will be passed as <code>--all-features</code>).  Defaults to <code><mark>rust-analyzer.cargo.allFeatures</mark></code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.allTargets (default: <code>true</code>)</dt>
<dd>
<p>Check all targets and tests (will be passed as <code>--all-targets</code>).</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.command (default: <code>"check"</code>)</dt>
<dd>
<p>Cargo command to use for <code>cargo check</code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.noDefaultFeatures (default: <code>null</code>)</dt>
<dd>
<p>Do not activate the <code>default</code> feature.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.target (default: <code>null</code>)</dt>
<dd>
<p>Check for a specific target. Defaults to  <code><mark>rust-analyzer.cargo.target</mark></code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.extraArgs (default: <code>[]</code>)</dt>
<dd>
<p>Extra arguments for <code>cargo check</code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.features (default: <code>null</code>)</dt>
<dd>
<p>List of features to activate. Defaults to  <code><mark>rust-analyzer.cargo.features</mark></code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.checkOnSave.overrideCommand (default: <code>null</code>)</dt>
<dd>
<p>Advanced option, fully override the command rust-analyzer uses for  checking. The command should include <code>--message-format=json</code> or  similar option.</p>
</dd>
<dt class="hdlist1">rust-analyzer.completion.addCallArgumentSnippets (default: <code>true</code>)</dt>
<dd>
<p>Whether to add argument snippets when completing functions.</p>
</dd>
<dt class="hdlist1">rust-analyzer.completion.addCallParenthesis (default: <code>true</code>)</dt>
<dd>
<p>Whether to add parenthesis when completing functions.</p>
</dd>
<dt class="hdlist1">rust-analyzer.completion.postfix.enable (default: <code>true</code>)</dt>
<dd>
<p>Whether to show postfix snippets like <code>dbg</code>, <code>if</code>, <code>not</code>, etc.</p>
</dd>
<dt class="hdlist1">rust-analyzer.completion.autoimport.enable (default: <code>true</code>)</dt>
<dd>
<p>Toggles the additional completions that automatically add imports when completed.  Note that your client must specify the <code>additionalTextEdits</code> LSP client capability to truly have this feature enabled.</p>
</dd>
<dt class="hdlist1">rust-analyzer.diagnostics.enable (default: <code>true</code>)</dt>
<dd>
<p>Whether to show native rust-analyzer diagnostics.</p>
</dd>
<dt class="hdlist1">rust-analyzer.diagnostics.enableExperimental (default: <code>true</code>)</dt>
<dd>
<p>Whether to show experimental rust-analyzer diagnostics that might  have more false positives than usual.</p>
</dd>
<dt class="hdlist1">rust-analyzer.diagnostics.disabled (default: <code>[]</code>)</dt>
<dd>
<p>List of rust-analyzer diagnostics to disable.</p>
</dd>
<dt class="hdlist1">rust-analyzer.diagnostics.warningsAsHint (default: <code>[]</code>)</dt>
<dd>
<p>List of warnings that should be displayed with info severity.\n\nThe  warnings will be indicated by a blue squiggly underline in code and  a blue icon in the <code>Problems Panel</code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.diagnostics.warningsAsInfo (default: <code>[]</code>)</dt>
<dd>
<p>List of warnings that should be displayed with hint severity.\n\nThe  warnings will be indicated by faded text or three dots in code and  will not show up in the <code>Problems Panel</code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.files.watcher (default: <code>"client"</code>)</dt>
<dd>
<p>Controls file watching implementation.</p>
</dd>
<dt class="hdlist1">rust-analyzer.hoverActions.debug (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Debug</code> action. Only applies when  <code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.hoverActions.enable (default: <code>true</code>)</dt>
<dd>
<p>Whether to show HoverActions in Rust files.</p>
</dd>
<dt class="hdlist1">rust-analyzer.hoverActions.gotoTypeDef (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Go to Type Definition</code> action. Only applies when  <code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.hoverActions.implementations (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Implementations</code> action. Only applies when  <code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.hoverActions.run (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Run</code> action. Only applies when  <code><mark>rust-analyzer.hoverActions.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.hoverActions.linksInHover (default: <code>true</code>)</dt>
<dd>
<p>Use markdown syntax for links in hover.</p>
</dd>
<dt class="hdlist1">rust-analyzer.inlayHints.chainingHints (default: <code>true</code>)</dt>
<dd>
<p>Whether to show inlay type hints for method chains.</p>
</dd>
<dt class="hdlist1">rust-analyzer.inlayHints.maxLength (default: <code>null</code>)</dt>
<dd>
<p>Maximum length for inlay hints. Default is unlimited.</p>
</dd>
<dt class="hdlist1">rust-analyzer.inlayHints.parameterHints (default: <code>true</code>)</dt>
<dd>
<p>Whether to show function parameter name inlay hints at the call  site.</p>
</dd>
<dt class="hdlist1">rust-analyzer.inlayHints.typeHints (default: <code>true</code>)</dt>
<dd>
<p>Whether to show inlay type hints for variables.</p>
</dd>
<dt class="hdlist1">rust-analyzer.lens.debug (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Debug</code> lens. Only applies when  <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.lens.enable (default: <code>true</code>)</dt>
<dd>
<p>Whether to show CodeLens in Rust files.</p>
</dd>
<dt class="hdlist1">rust-analyzer.lens.implementations (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Implementations</code> lens. Only applies when  <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.lens.run (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>Run</code> lens. Only applies when  <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.lens.methodReferences (default: <code>false</code>)</dt>
<dd>
<p>Whether to show <code>Method References</code> lens. Only applies when  <code><mark>rust-analyzer.lens.enable</mark></code> is set.</p>
</dd>
<dt class="hdlist1">rust-analyzer.linkedProjects (default: <code>[]</code>)</dt>
<dd>
<p>Disable project auto-discovery in favor of explicitly specified set  of projects.\n\nElements must be paths pointing to <code>Cargo.toml</code>,  <code>rust-project.json</code>, or JSON objects in <code>rust-project.json</code> format.</p>
</dd>
<dt class="hdlist1">rust-analyzer.lruCapacity (default: <code>null</code>)</dt>
<dd>
<p>Number of syntax trees rust-analyzer keeps in memory.  Defaults to 128.</p>
</dd>
<dt class="hdlist1">rust-analyzer.notifications.cargoTomlNotFound (default: <code>true</code>)</dt>
<dd>
<p>Whether to show <code>can&#8217;t find Cargo.toml</code> error message.</p>
</dd>
<dt class="hdlist1">rust-analyzer.procMacro.enable (default: <code>false</code>)</dt>
<dd>
<p>Enable Proc macro support, <code><mark>rust-analyzer.cargo.loadOutDirsFromCheck</mark></code> must be  enabled.</p>
</dd>
<dt class="hdlist1">rust-analyzer.runnables.overrideCargo (default: <code>null</code>)</dt>
<dd>
<p>Command to be executed instead of 'cargo' for runnables.</p>
</dd>
<dt class="hdlist1">rust-analyzer.runnables.cargoExtraArgs (default: <code>[]</code>)</dt>
<dd>
<p>Additional arguments to be passed to cargo for runnables such as  tests or binaries.\nFor example, it may be <code>--release</code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.rustcSource (default: <code>null</code>)</dt>
<dd>
<p>Path to the rust compiler sources, for usage in rustc_private projects.</p>
</dd>
<dt class="hdlist1">rust-analyzer.rustfmt.extraArgs (default: <code>[]</code>)</dt>
<dd>
<p>Additional arguments to <code>rustfmt</code>.</p>
</dd>
<dt class="hdlist1">rust-analyzer.rustfmt.overrideCommand (default: <code>null</code>)</dt>
<dd>
<p>Advanced option, fully override the command rust-analyzer uses for  formatting.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="non-cargo-based-projects"><a class="anchor" href="#non-cargo-based-projects"></a>Non-Cargo Based Projects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>rust-analyzer does not require Cargo.
However, if you use some other build system, you&#8217;ll have to describe the structure of your project for rust-analyzer in the <code>rust-project.json</code> format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="TypeScript"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td><td class="code"><pre>interface JsonProject {
    /// Path to the directory with *source code* of sysroot crates.
    ///
    /// It should point to the directory where std, core, and friends can be found:
    /// https://github.com/rust-lang/rust/tree/master/library.
    ///
    /// If provided, rust-analyzer automatically adds dependencies on sysroot
    /// crates. Conversely, if you omit this path, you can specify sysroot
    /// dependencies yourself and, for example, have several different "sysroots" in
    /// one graph of crates.
    sysroot_src?: string;
    /// The set of crates comprising the current project.
    /// Must include all transitive dependencies as well as sysroot crate (libstd, libcore and such).
    crates: Crate[];
}

interface Crate {
    /// Optional crate name used for display purposes, without affecting semantics.
    /// See the `deps` key for semantically-significant crate names.
    display_name?: string;
    /// Path to the root module of the crate.
    root_module: string;
    /// Edition of the crate.
    edition: "2015" | "2018" | "2021";
    /// Dependencies
    deps: Dep[];
    /// Should this crate be treated as a member of current "workspace".
    ///
    /// By default, inferred from the `root_module` (members are the crates which reside
    /// inside the directory opened in the editor).
    ///
    /// Set this to `false` for things like standard library and 3rd party crates to
    /// enable performance optimizations (rust-analyzer assumes that non-member crates
    /// don't change).
    is_workspace_member?: boolean;
    /// Optionally specify the (super)set of `.rs` files comprising this crate.
    ///
    /// By default, rust-analyzer assumes that only files under `root_module.parent` can belong to a crate.
    /// `include_dirs` are included recursively, unless a subdirectory is in `exclude_dirs`.
    ///
    /// Different crates can share the same `source`.
    ///
    /// If two crates share an `.rs` file in common, they *must* have the same `source`.
    /// rust-analyzer assumes that files from one source can't refer to files in another source.
    source?: {
        include_dirs: string[],
        exclude_dirs: string[],
    },
    /// The set of cfgs activated for a given crate, like `["unix", "feature=foo", "feature=bar"]`.
    cfg: string[];
    /// Target triple for this Crate.
    ///
    /// Used when running `rustc --print cfg` to get target-specific cfgs.
    target?: string;
    /// Environment variables, used for the `env!` macro
    env: : { [key: string]: string; },

    /// For proc-macro crates, path to compiles proc-macro (.so file).
    proc_macro_dylib_path?: string;
}

interface Dep {
    /// Index of a crate in the `crates` array.
    crate: number,
    /// Name as should appear in the (implicit) `extern crate name` declaration.
    name: string,
}
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>This format is provisional and subject to change.
Specifically, the <code>roots</code> setup will be different eventually.</p>
</div>
<div class="paragraph">
<p>There are tree ways to feed <code>rust-project.json</code> to rust-analyzer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Place <code>rust-project.json</code> file at the root of the project, and rust-anlayzer will discover it.</p>
</li>
<li>
<p>Specify <code>"rust-analyzer.linkedProjects": [ "path/to/rust-project.json" ]</code> in the settings (and make sure that your LSP client sends settings as a part of initialize request).</p>
</li>
<li>
<p>Specify <code>"rust-analyzer.linkedProjects": [ { "roots": [&#8230;&#8203;], "crates": [&#8230;&#8203;] }]</code> inline.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Relative paths are interpreted relative to <code>rust-project.json</code> file location or (for inline JSON) relative to <code>rootUri</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rust-analyzer/rust-project.json-example" class="bare">https://github.com/rust-analyzer/rust-project.json-example</a> for a small example.</p>
</div>
<div class="paragraph">
<p>You can set <code>RA_LOG</code> environmental variable to <code>rust_analyzer=info</code> to inspect how rust-analyzer handles config and project loading.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="features"><a class="anchor" href="#features"></a>Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="auto-import"><a class="anchor" href="#auto-import"></a>Auto Import</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/auto_import.rs#L12">auto_import.rs</a></p>
</div>
<div class="paragraph">
<p>Using the <code>auto-import</code> assist it is possible to insert missing imports for unresolved items.
When inserting an import it will do so in a structured manner by keeping imports grouped,
separated by a newline in the following order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>std</code> and <code>core</code></p>
</li>
<li>
<p>External Crates</p>
</li>
<li>
<p>Current Crate, paths prefixed by <code>crate</code></p>
</li>
<li>
<p>Current Module, paths prefixed by <code>self</code></p>
</li>
<li>
<p>Super Module, paths prefixed by <code>super</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">fs</span><span class="p">::</span><span class="n">File</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">itertools</span><span class="p">::</span><span class="n">Itertools</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">syntax</span><span class="p">::</span><span class="n">ast</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">crate</span><span class="p">::</span><span class="nn">utils</span><span class="p">::</span><span class="n">insert_use</span><span class="p">;</span>

<span class="k">use</span> <span class="k">self</span><span class="p">::</span><span class="n">auto_import</span><span class="p">;</span>

<span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="n">AssistContext</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Merge Behaviour</div>
<p>It is possible to configure how use-trees are merged with the <code>importMergeBehaviour</code> setting.
It has the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>full</code>: This setting will cause auto-import to always completely merge use-trees that share the
same path prefix while also merging inner trees that share the same path-prefix. This kind of
nesting is only supported in Rust versions later than 1.24.</p>
</li>
<li>
<p><code>last</code>: This setting will cause auto-import to merge use-trees as long as the resulting tree
will only contain a nesting of single segment paths at the very end.</p>
</li>
<li>
<p><code>none</code>: This setting will cause auto-import to never merge use-trees keeping them as simple
paths.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <code>VS Code</code> the configuration for this is <code>rust-analyzer.assist.importMergeBehaviour</code>.</p>
</div>
<div class="paragraph">
<div class="title">Import Prefix</div>
<p>The style of imports in the same crate is configurable through the <code>importPrefix</code> setting.
It has the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>by_crate</code>: This setting will force paths to be always absolute, starting with the <code>crate</code>
prefix, unless the item is defined outside of the current crate.</p>
</li>
<li>
<p><code>by_self</code>: This setting will force paths that are relative to the current module to always
start with <code>self</code>. This will result in paths that always start with either <code>crate</code>, <code>self</code>,
<code>super</code> or an extern crate identifier.</p>
</li>
<li>
<p><code>plain</code>: This setting does not impose any restrictions in imports.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <code>VS Code</code> the configuration for this is <code>rust-analyzer.assist.importPrefix</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="expand-macro-recursively"><a class="anchor" href="#expand-macro-recursively"></a>Expand Macro Recursively</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/expand_macro.rs#L17">expand_macro.rs</a></p>
</div>
<div class="paragraph">
<p>Shows the full macro expansion of the macro at current cursor.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Expand macro recursively</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="extend-selection"><a class="anchor" href="#extend-selection"></a>Extend Selection</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/extend_selection.rs#L15">extend_selection.rs</a></p>
</div>
<div class="paragraph">
<p>Extends the current selection to the encompassing syntactic construct
(expression, statement, item, module, etc). It works with multiple cursors.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>→</kbd></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="file-structure"><a class="anchor" href="#file-structure"></a>File Structure</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/file_structure.rs#L19">file_structure.rs</a></p>
</div>
<div class="paragraph">
<p>Provides a tree of the symbols defined in the file. Can be used to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>fuzzy search symbol in a file (super useful)</p>
</li>
<li>
<p>draw breadcrumbs to describe the context around the cursor</p>
</li>
<li>
<p>draw outline of the file</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="format-string-completion"><a class="anchor" href="#format-string-completion"></a>Format String Completion.</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/completion/src/completions/postfix/format_like.rs#L0">format_like.rs</a></p>
</div>
<div class="paragraph">
<p><code>"Result {result} is {2 + 2}"</code> is expanded to the <code>"Result {} is {}", result, 2 + 2</code>.</p>
</div>
<div class="paragraph">
<p>The following postfix snippets are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>format</code> &#8594; <code>format!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>panic</code> &#8594; <code>panic!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>println</code> &#8594; <code>println!(&#8230;&#8203;)</code></p>
</li>
<li>
<p><code>log</code>:
+ <code>logd</code> &#8594; <code>log::debug!(&#8230;&#8203;)</code>
+ <code>logt</code> &#8594; <code>log::trace!(&#8230;&#8203;)</code>
+ <code>logi</code> &#8594; <code>log::info!(&#8230;&#8203;)</code>
+ <code>logw</code> &#8594; <code>log::warn!(&#8230;&#8203;)</code>
+ <code>loge</code> &#8594; <code>log::error!(&#8230;&#8203;)</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="fuzzy-completion-and-autoimports"><a class="anchor" href="#fuzzy-completion-and-autoimports"></a>Fuzzy Completion and Autoimports</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/completion/src/completions/unqualified_path.rs#L80">unqualified_path.rs</a></p>
</div>
<div class="paragraph">
<p>When completing names in the current scope, proposes additional imports from other modules or crates,
if they can be qualified in the scope and their name contains all symbols from the completion input
(case-insensitive, in any order or places).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre>fn main() {
    pda&lt;|&gt;
}
# pub mod std { pub mod marker { pub struct PhantomData { } } }
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#8594;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>use std::marker::PhantomData;

fn main() {
    PhantomData
}
# pub mod std { pub mod marker { pub struct PhantomData { } } }
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Fuzzy search details</div>
<p>To avoid an excessive amount of the results returned, completion input is checked for inclusion in the names only
(i.e. in <code>HashMap</code> in the <code>std::collections::HashMap</code> path).
For the same reasons, avoids searching for any imports for inputs with their length less that 2 symbols.</p>
</div>
<div class="paragraph">
<div class="title">Merge Behavior</div>
<p>It is possible to configure how use-trees are merged with the <code>importMergeBehavior</code> setting.
Mimics the corresponding behavior of the <code>Auto Import</code> feature.</p>
</div>
<div class="paragraph">
<div class="title">LSP and performance implications</div>
<p>The feature is enabled only if the LSP client supports LSP protocol version 3.16+ and reports the <code>additionalTextEdits</code>
(case sensitive) resolve client capability in its client capabilities.
This way the server is able to defer the costly computations, doing them for a selected completion item only.
For clients with no such support, all edits have to be calculated on the completion request, including the fuzzy search completion ones,
which might be slow ergo the feature is automatically disabled.</p>
</div>
<div class="paragraph">
<div class="title">Feature toggle</div>
<p>The feature can be forcefully turned off in the settings with the <code>rust-analyzer.completion.enableAutoimportCompletions</code> flag.
Note that having this flag set to <code>true</code> does not guarantee that the feature is enabled: your client needs to have the corredponding
capability enabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="go-to-definition"><a class="anchor" href="#go-to-definition"></a>Go to Definition</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_definition.rs#L15">goto_definition.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the definition of an identifier.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><kbd>F12</kbd></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="go-to-implementation"><a class="anchor" href="#go-to-implementation"></a>Go to Implementation</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_implementation.rs#L7">goto_implementation.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the impl block of structs, enums or traits. Also implemented as a code lens.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>F12</kbd></span></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="go-to-type-definition"><a class="anchor" href="#go-to-type-definition"></a>Go to Type Definition</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/goto_type_definition.rs#L6">goto_type_definition.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the type of an identifier.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>*Go to Type Definition</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="hover"><a class="anchor" href="#hover"></a>Hover</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/hover.rs#L90">hover.rs</a></p>
</div>
<div class="paragraph">
<p>Shows additional information, like type of an expression or documentation for definition when "focusing" code.
Focusing is usually hovering with a mouse, but can also be triggered with a shortcut.</p>
</div>
</div>
<div class="sect2">
<h3 id="inlay-hints"><a class="anchor" href="#inlay-hints"></a>Inlay Hints</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/inlay_hints.rs#L41">inlay_hints.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer shows additional information inline with the source code.
Editors usually render this using read-only virtual text snippets interspersed with code.</p>
</div>
<div class="paragraph">
<p>rust-analyzer shows hints for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>types of local variables</p>
</li>
<li>
<p>names of function arguments</p>
</li>
<li>
<p>types of chained expressions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note:</strong> VS Code does not have native support for inlay hints <a href="https://github.com/microsoft/vscode/issues/16221">yet</a> and the hints are implemented using decorations.
This approach has limitations, the caret movement and bracket highlighting near the edges of the hint may be weird:
<a href="https://github.com/rust-analyzer/rust-analyzer/issues/1623">1</a>, <a href="https://github.com/rust-analyzer/rust-analyzer/issues/3453">2</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>*Rust Analyzer: Toggle inlay hints</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="join-lines"><a class="anchor" href="#join-lines"></a>Join Lines</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/join_lines.rs#L12">join_lines.rs</a></p>
</div>
<div class="paragraph">
<p>Join selected lines into one, smartly fixing up whitespace, trailing commas, and braces.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Join lines</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="magic-completions"><a class="anchor" href="#magic-completions"></a>Magic Completions</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/completion/src/lib.rs#L29">lib.rs</a></p>
</div>
<div class="paragraph">
<p>In addition to usual reference completion, rust-analyzer provides some ✨magic✨
completions as well:</p>
</div>
<div class="paragraph">
<p>Keywords like <code>if</code>, <code>else</code> <code>while</code>, <code>loop</code> are completed with braces, and cursor
is placed at the appropriate position. Even though <code>if</code> is easy to type, you
still want to complete it, to get ` { }` for free! <code>return</code> is inserted with a
space or <code>;</code> depending on the return type of the function.</p>
</div>
<div class="paragraph">
<p>When completing a function call, <code>()</code> are automatically inserted. If a function
takes arguments, the cursor is positioned inside the parenthesis.</p>
</div>
<div class="paragraph">
<p>There are postfix completions, which can be triggered by typing something like
<code>foo().if</code>. The word after <code>.</code> determines postfix completion. Possible variants are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>expr.if</code> &#8594; <code>if expr {}</code> or <code>if let &#8230;&#8203; {}</code> for <code>Option</code> or <code>Result</code></p>
</li>
<li>
<p><code>expr.match</code> &#8594; <code>match expr {}</code></p>
</li>
<li>
<p><code>expr.while</code> &#8594; <code>while expr {}</code> or <code>while let &#8230;&#8203; {}</code> for <code>Option</code> or <code>Result</code></p>
</li>
<li>
<p><code>expr.ref</code> &#8594; <code>&amp;expr</code></p>
</li>
<li>
<p><code>expr.refm</code> &#8594; <code>&amp;mut expr</code></p>
</li>
<li>
<p><code>expr.let</code> &#8594; <code>let &lt;|&gt; = expr;</code></p>
</li>
<li>
<p><code>expr.letm</code> &#8594; <code>let mut &lt;|&gt; = expr;</code></p>
</li>
<li>
<p><code>expr.not</code> &#8594; <code>!expr</code></p>
</li>
<li>
<p><code>expr.dbg</code> &#8594; <code>dbg!(expr)</code></p>
</li>
<li>
<p><code>expr.dbgr</code> &#8594; <code>dbg!(&amp;expr)</code></p>
</li>
<li>
<p><code>expr.call</code> &#8594; <code>(expr)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There also snippet completions:</p>
</div>
<div class="ulist">
<div class="title">Expressions</div>
<ul>
<li>
<p><code>pd</code> &#8594; <code>eprintln!(" = {:?}", );</code></p>
</li>
<li>
<p><code>ppd</code> &#8594; <code>eprintln!(" = {:#?}", );</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Items</div>
<ul>
<li>
<p><code>tfn</code> &#8594; <code>#[test] fn feature(){}</code></p>
</li>
<li>
<p><code>tmod</code> &#8594;</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="nd">#[cfg(test)]</span>
<span class="k">mod</span> <span class="n">tests</span> <span class="p">{</span>
    <span class="k">use</span> <span class="nn">super</span><span class="p">::</span><span class="o">*</span><span class="p">;</span>

    <span class="nd">#[test]</span>
    <span class="k">fn</span> <span class="nf">test_name</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>And the auto import completions, enabled with the <code>rust-analyzer.completion.autoimport.enable</code> setting and the corresponding LSP client capabilities.
Those are the additional completion options with automatic <code>use</code> import and options from all project importable items,
fuzzy matched agains the completion imput.</p>
</div>
</div>
<div class="sect2">
<h3 id="matching-brace"><a class="anchor" href="#matching-brace"></a>Matching Brace</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/matching_brace.rs#L7">matching_brace.rs</a></p>
</div>
<div class="paragraph">
<p>If the cursor is on any brace (<code>&lt;&gt;(){}[]||</code>) which is a part of a brace-pair,
moves cursor to the matching brace. It uses the actual parser to determine
braces, so it won&#8217;t confuse generics with comparisons.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Find matching brace</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="memory-usage"><a class="anchor" href="#memory-usage"></a>Memory Usage</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_db/src/apply_change.rs#L95">apply_change.rs</a></p>
</div>
<div class="paragraph">
<p>Clears rust-analyzer&#8217;s internal database and prints memory usage statistics.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Memory Usage (Clears Database)</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="on-enter"><a class="anchor" href="#on-enter"></a>On Enter</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/typing/on_enter.rs#L15">on_enter.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer can override <kbd>Enter</kbd> key to make it smarter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><kbd>Enter</kbd> inside triple-slash comments automatically inserts <code>///</code></p>
</li>
<li>
<p><kbd>Enter</kbd> in the middle or after a trailing space in <code>//</code> inserts <code>//</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This action needs to be assigned to shortcut explicitly.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">VS Code</dt>
<dd>
<p>Add the following to <code>keybindings.json</code>:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Enter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.onEnter"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"editorTextFocus &amp;&amp; !suggestWidgetVisible &amp;&amp; editorLangId == rust"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="on-typing-assists"><a class="anchor" href="#on-typing-assists"></a>On Typing Assists</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/typing.rs#L36">typing.rs</a></p>
</div>
<div class="paragraph">
<p>Some features trigger on typing certain characters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>typing <code>let =</code> tries to smartly add <code>;</code> if <code>=</code> is followed by an existing expression</p>
</li>
<li>
<p>typing <code>.</code> in a chain method call auto-indents</p>
<div class="dlist">
<dl>
<dt class="hdlist1">VS Code</dt>
<dd>
<p>Add the following to <code>settings.json</code>:</p>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>"editor.formatOnType": true,</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="parent-module"><a class="anchor" href="#parent-module"></a>Parent Module</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/parent_module.rs#L12">parent_module.rs</a></p>
</div>
<div class="paragraph">
<p>Navigates to the parent module of the current module.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Locate parent module</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="run"><a class="anchor" href="#run"></a>Run</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/runnables.rs#L85">runnables.rs</a></p>
</div>
<div class="paragraph">
<p>Shows a popup suggesting to run a test/benchmark/binary <strong>at the current cursor
location</strong>. Super useful for repeatedly running just a single test. Do bind this
to a shortcut!</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Run</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="semantic-syntax-highlighting"><a class="anchor" href="#semantic-syntax-highlighting"></a>Semantic Syntax Highlighting</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/syntax_highlighting.rs#L38">syntax_highlighting.rs</a></p>
</div>
<div class="paragraph">
<p>rust-analyzer highlights the code semantically.
For example, <code>bar</code> in <code>foo::Bar</code> might be colored differently depending on whether <code>Bar</code> is an enum or a trait.
rust-analyzer does not specify colors directly, instead it assigns tag (like <code>struct</code>) and a set of modifiers (like <code>declaration</code>) to each token.
It&#8217;s up to the client to map those to specific colors.</p>
</div>
<div class="paragraph">
<p>The general rule is that a reference to an entity gets colored the same way as the entity itself.
We also give special modifier for <code>mut</code> and <code>&amp;mut</code> local variables.</p>
</div>
</div>
<div class="sect2">
<h3 id="show-syntax-tree"><a class="anchor" href="#show-syntax-tree"></a>Show Syntax Tree</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/syntax_tree.rs#L7">syntax_tree.rs</a></p>
</div>
<div class="paragraph">
<p>Shows the parse tree of the current file. It exists mostly for debugging
rust-analyzer itself.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Show Syntax Tree</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="status"><a class="anchor" href="#status"></a>Status</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/status.rs#L25">status.rs</a></p>
</div>
<div class="paragraph">
<p>Shows internal statistic about memory usage of rust-analyzer.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Status</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="structural-search-and-replace"><a class="anchor" href="#structural-search-and-replace"></a>Structural Search and Replace</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ssr/src/lib.rs#L6">lib.rs</a></p>
</div>
<div class="paragraph">
<p>Search and replace with named wildcards that will match any expression, type, path, pattern or item.
The syntax for a structural search replace command is <code>&lt;search_pattern&gt; =&#8658;&gt; &lt;replace_pattern&gt;</code>.
A <code>$&lt;name&gt;</code> placeholder in the search pattern will match any AST node and <code>$&lt;name&gt;</code> will reference it in the replacement.
Within a macro call, a placeholder will match up until whatever token follows the placeholder.</p>
</div>
<div class="paragraph">
<p>All paths in both the search pattern and the replacement template must resolve in the context
in which this command is invoked. Paths in the search pattern will then match the code if they
resolve to the same item, even if they&#8217;re written differently. For example if we invoke the
command in the module <code>foo</code> with a pattern of <code>Bar</code>, then code in the parent module that refers
to <code>foo::Bar</code> will match.</p>
</div>
<div class="paragraph">
<p>Paths in the replacement template will be rendered appropriately for the context in which the
replacement occurs. For example if our replacement template is <code>foo::Bar</code> and we match some
code in the <code>foo</code> module, we&#8217;ll insert just <code>Bar</code>.</p>
</div>
<div class="paragraph">
<p>Inherent method calls should generally be written in UFCS form. e.g. <code>foo::Bar::baz($s, $a)</code> will
match <code>$s.baz($a)</code>, provided the method call <code>baz</code> resolves to the method <code>foo::Bar::baz</code>. When a
placeholder is the receiver of a method call in the search pattern (e.g. <code>$s.foo()</code>), but not in
the replacement template (e.g. <code>bar($s)</code>), then *, &amp; and &amp;mut will be added as needed to mirror
whatever autoderef and autoref was happening implicitly in the matched code.</p>
</div>
<div class="paragraph">
<p>The scope of the search / replace will be restricted to the current selection if any, otherwise
it will apply to the whole workspace.</p>
</div>
<div class="paragraph">
<p>Placeholders may be given constraints by writing them as <code>${&lt;name&gt;:&lt;constraint1&gt;:&lt;constraint2&gt;&#8230;&#8203;}</code>.</p>
</div>
<div class="paragraph">
<p>Supported constraints:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Constraint</th>
<th class="tableblock halign-left valign-top">Restricts placeholder</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind(literal)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a literal (e.g. <code>42</code> or <code>"forty two"</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">not(a)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Negates the constraint <code>a</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Available via the command <code>rust-analyzer.ssr</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="c">// Using structural search replace command [foo($a, $b) ==&gt;&gt; ($a).foo($b)]</span>

<span class="c">// BEFORE</span>
<span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>

<span class="c">// AFTER</span>
<span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span><span class="nf">.foo</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: Structural Search Replace</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="view-hir"><a class="anchor" href="#view-hir"></a>View Hir</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide/src/view_hir.rs#L6">view_hir.rs</a></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Action Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Rust Analyzer: View Hir</strong></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="workspace-symbol"><a class="anchor" href="#workspace-symbol"></a>Workspace Symbol</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_db/src/symbol_index.rs#L142">symbol_index.rs</a></p>
</div>
<div class="paragraph">
<p>Uses fuzzy-search to find types, modules and functions by name across your
project and dependencies. This is <strong>the</strong> most useful feature, which improves code
navigation tremendously. It mostly works on top of the built-in LSP
functionality, however <code>#</code> and <code>*</code> symbols can be used to narrow down the
search. Specifically,</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Foo</code> searches for <code>Foo</code> type in the current workspace</p>
</li>
<li>
<p><code>foo#</code> searches for <code>foo</code> function in the current workspace</p>
</li>
<li>
<p><code>Foo*</code> searches for <code>Foo</code> type among dependencies, including <code>stdlib</code></p>
</li>
<li>
<p><code>foo#*</code> searches for <code>foo</code> function among dependencies</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That is, <code>#</code> switches from "types" to all symbols, <code>*</code> switches from the current
workspace to dependencies.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VS Code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="keyseq"><kbd>Ctrl</kbd>+<kbd>T</kbd></span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assists-code-actions"><a class="anchor" href="#assists-code-actions"></a>Assists (Code Actions)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Assists, or code actions, are small local refactorings, available in a particular context.
They are usually triggered by a shortcut or by clicking a light bulb icon in the editor.
Cursor position or selection is signified by <code>┃</code> character.</p>
</div>
<h3 id="add_explicit_type" class="discrete"><code>add_explicit_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/add_explicit_type.rs#L9">add_explicit_type.rs</a></p>
</div>
<div class="paragraph">
<p>Specify type for a let binding.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="err">┃</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_hash" class="discrete"><code>add_hash</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/raw_string.rs#L92">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a hash to a raw string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r##"Hello, World!"##</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_impl_default_members" class="discrete"><code>add_impl_default_members</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/add_missing_impl_members.rs#L53">add_missing_impl_members.rs</a></p>
</div>
<div class="paragraph">
<p>Adds scaffold for overriding default impl members.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">);</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span> <span class="o">=</span> <span class="p">();</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span><span class="err">┃</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">);</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span> <span class="o">=</span> <span class="p">();</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>

    <span class="err">$</span><span class="mi">0</span><span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_impl_missing_members" class="discrete"><code>add_impl_missing_members</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/add_missing_impl_members.rs#L12">add_missing_impl_members.rs</a></p>
</div>
<div class="paragraph">
<p>Adds scaffold for required impl members.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span><span class="err">┃</span>

<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre><span class="k">trait</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">type</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">T</span><span class="p">;</span>
    <span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Trait</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="p">()</span> <span class="p">{</span>
    <span class="err">$</span><span class="mi">0</span><span class="k">type</span> <span class="n">X</span><span class="p">;</span>

    <span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="nb">u32</span> <span class="p">{</span>
        <span class="nd">todo!</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="add_turbo_fish" class="discrete"><code>add_turbo_fish</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/add_turbo_fish.rs#L10">add_turbo_fish.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>::&lt;_&gt;</code> to a call of a generic method or function.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="nd">todo!</span><span class="p">()</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">make</span><span class="err">┃</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">make</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">T</span> <span class="p">{</span> <span class="nd">todo!</span><span class="p">()</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nn">make</span><span class="p">::</span><span class="o">&lt;</span><span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="apply_demorgan" class="discrete"><code>apply_demorgan</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/apply_demorgan.rs#L5">apply_demorgan.rs</a></p>
</div>
<div class="paragraph">
<p>Apply <a href="https://en.wikipedia.org/wiki/De_Morgan%27s_laws">De Morgan&#8217;s law</a>.
This transforms expressions of the form <code>!l || !r</code> into <code>!(l &amp;&amp; r)</code>.
This also works with <code>&amp;&amp;</code>. This assist can only be applied with the cursor
on either <code>||</code> or <code>&amp;&amp;</code>, with both operands being a negation of some kind.
This means something of the form <code>!x</code> or <code>x != y</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">4</span> <span class="p">||</span><span class="err">┃</span> <span class="o">!</span><span class="n">y</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">&amp;&amp;</span> <span class="n">y</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="auto_import" class="discrete"><code>auto_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/auto_import.rs#L67">auto_import.rs</a></p>
</div>
<div class="paragraph">
<p>If the name is unresolved, provides all possible imports for it.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="n">HashMap</span><span class="err">┃</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="change_visibility" class="discrete"><code>change_visibility</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/change_visibility.rs#L11">change_visibility.rs</a></p>
</div>
<div class="paragraph">
<p>Adds or changes existing visibility specifier.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="err">┃</span><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_integer_literal" class="discrete"><code>convert_integer_literal</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/convert_integer_literal.rs#L5">convert_integer_literal.rs</a></p>
</div>
<div class="paragraph">
<p>Converts the base of integer literals to other bases.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">10</span><span class="err">┃</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">const</span> <span class="mi">_</span><span class="p">:</span> <span class="nb">i32</span> <span class="o">=</span> <span class="mi">0b1010</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="convert_to_guarded_return" class="discrete"><code>convert_to_guarded_return</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/early_return.rs#L21">early_return.rs</a></p>
</div>
<div class="paragraph">
<p>Replace a large conditional with a guarded return.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">if</span> <span class="n">cond</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">();</span>
        <span class="nf">bar</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="o">!</span><span class="n">cond</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nf">foo</span><span class="p">();</span>
    <span class="nf">bar</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="expand_glob_import" class="discrete"><code>expand_glob_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/expand_glob_import.rs#L18">expand_glob_import.rs</a></p>
</div>
<div class="paragraph">
<p>Expands glob imports.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">use</span> <span class="nn">foo</span><span class="p">::</span><span class="o">*</span><span class="err">┃</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">qux</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Bar</span><span class="p">;</span>
    <span class="k">pub</span> <span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">use</span> <span class="nn">foo</span><span class="p">::{</span><span class="n">Baz</span><span class="p">,</span> <span class="n">Bar</span><span class="p">};</span>

<span class="k">fn</span> <span class="nf">qux</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">Bar</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_assignment" class="discrete"><code>extract_assignment</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/extract_assignment.rs#L12">extract_assignment.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts variable assigment to outside an if or match statement.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="k">if</span> <span class="k">true</span> <span class="p">{</span>
        <span class="err">┃</span><span class="n">foo</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">foo</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>

    <span class="n">foo</span> <span class="o">=</span> <span class="k">if</span> <span class="k">true</span> <span class="p">{</span>
        <span class="mi">5</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="mi">4</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_module_to_file" class="discrete"><code>extract_module_to_file</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/extract_module_to_file.rs#L10">extract_module_to_file.rs</a></p>
</div>
<div class="paragraph">
<p>This assist extract module to file.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span> <span class="p">{</span><span class="err">┃</span>
    <span class="k">fn</span> <span class="nf">t</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">foo</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_struct_from_enum_variant" class="discrete"><code>extract_struct_from_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/extract_struct_from_enum_variant.rs#L19">extract_struct_from_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts a struct from enum variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="err">┃</span><span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">,</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="nf">One</span><span class="p">(</span><span class="k">pub</span> <span class="nb">u32</span><span class="p">,</span> <span class="k">pub</span> <span class="nb">u32</span><span class="p">);</span>

<span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="nf">One</span><span class="p">(</span><span class="n">One</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="extract_variable" class="discrete"><code>extract_variable</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/extract_variable.rs#L13">extract_variable.rs</a></p>
</div>
<div class="paragraph">
<p>Extracts subexpression into a variable.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span><span class="err">┃</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="err">$</span><span class="mi">0</span><span class="n">var_name</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span>
    <span class="n">var_name</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="fill_match_arms" class="discrete"><code>fill_match_arms</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/fill_match_arms.rs#L15">fill_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>Adds missing clauses to a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">$</span><span class="mi">0</span><span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="p">{}</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="p">{}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="fix_visibility" class="discrete"><code>fix_visibility</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/fix_visibility.rs#L12">fix_visibility.rs</a></p>
</div>
<div class="paragraph">
<p>Makes inaccessible item public.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">m</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">m</span><span class="p">::</span><span class="n">frobnicate</span><span class="err">┃</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="k">mod</span> <span class="n">m</span> <span class="p">{</span>
    <span class="err">$</span><span class="mi">0</span><span class="k">pub</span><span class="p">(</span><span class="n">crate</span><span class="p">)</span> <span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nn">m</span><span class="p">::</span><span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_binexpr" class="discrete"><code>flip_binexpr</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/flip_binexpr.rs#L5">flip_binexpr.rs</a></p>
</div>
<div class="paragraph">
<p>Flips operands of a binary expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="mi">90</span> <span class="o">+</span><span class="err">┃</span> <span class="mi">2</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="mi">_</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">90</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_comma" class="discrete"><code>flip_comma</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/flip_comma.rs#L5">flip_comma.rs</a></p>
</div>
<div class="paragraph">
<p>Flips two comma-separated items.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span><span class="err">┃</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="flip_trait_bound" class="discrete"><code>flip_trait_bound</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/flip_trait_bound.rs#L9">flip_trait_bound.rs</a></p>
</div>
<div class="paragraph">
<p>Flips two trait bounds.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span> <span class="o">+</span><span class="err">┃</span> <span class="nb">Copy</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="nb">Copy</span> <span class="o">+</span> <span class="n">Clone</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_default_from_enum_variant" class="discrete"><code>generate_default_from_enum_variant</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/generate_default_from_enum_variant.rs#L8">generate_default_from_enum_variant.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a Default impl for an enum using a variant.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="err">┃</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Version</span> <span class="p">{</span>
 <span class="n">Undefined</span><span class="p">,</span>
 <span class="n">Minor</span><span class="p">,</span>
 <span class="n">Major</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span> <span class="n">Default</span> <span class="k">for</span> <span class="n">Version</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">default</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">Self</span><span class="p">::</span><span class="n">Minor</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_derive" class="discrete"><code>generate_derive</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/generate_derive.rs#L9">generate_derive.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new <code>#[derive()]</code> clause to a struct or enum.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nd">#[derive(</span><span class="err">$</span><span class="mi">0</span><span class="nd">)]</span>
<span class="k">struct</span> <span class="n">Point</span> <span class="p">{</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
    <span class="n">y</span><span class="p">:</span> <span class="nb">u32</span><span class="p">,</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_from_impl_for_enum" class="discrete"><code>generate_from_impl_for_enum</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/generate_from_impl_for_enum.rs#L8">generate_from_impl_for_enum.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a From impl for an enum variant with one tuple field.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="err">┃</span><span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">A</span> <span class="p">{</span> <span class="nf">One</span><span class="p">(</span><span class="nb">u32</span><span class="p">)</span> <span class="p">}</span>

<span class="k">impl</span> <span class="n">From</span><span class="o">&lt;</span><span class="nb">u32</span><span class="o">&gt;</span> <span class="k">for</span> <span class="n">A</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">v</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span>
        <span class="nn">A</span><span class="p">::</span><span class="nf">One</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_function" class="discrete"><code>generate_function</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/generate_function.rs#L19">generate_function.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a stub function with a signature matching the function under the cursor.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">baz</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Baz</span> <span class="p">{</span> <span class="n">Baz</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">bar</span><span class="err">┃</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nf">baz</span><span class="p">());</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Baz</span><span class="p">;</span>
<span class="k">fn</span> <span class="nf">baz</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Baz</span> <span class="p">{</span> <span class="n">Baz</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">bar</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="nf">baz</span><span class="p">());</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">bar</span><span class="p">(</span><span class="n">arg</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span><span class="p">,</span> <span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="k">-&gt;</span> <span class="p">()}</span> <span class="p">{</span>
    <span class="nd">todo!</span><span class="p">()</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_impl" class="discrete"><code>generate_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/generate_impl.rs#L7">generate_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new inherent impl for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="err">$</span><span class="mi">0</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="generate_new" class="discrete"><code>generate_new</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/generate_new.rs#L11">generate_new.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a new inherent impl for a type.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span><span class="err">┃</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="p">{</span>
     <span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">:</span> <span class="n">Clone</span><span class="o">&gt;</span> <span class="n">Ctx</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="err">$</span><span class="mi">0</span><span class="nf">new</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Self</span> <span class="p">{</span> <span class="n">Self</span> <span class="p">{</span> <span class="n">data</span> <span class="p">}</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="infer_function_return_type" class="discrete"><code>infer_function_return_type</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/infer_function_return_type.rs#L7">infer_function_return_type.rs</a></p>
</div>
<div class="paragraph">
<p>Adds the return type to a function or closure inferred from its tail expression if it doesn&#8217;t have a return
type specified. This assists is useable in a functions or closures tail expression or return type position.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="mi">4</span><span class="err">┃</span><span class="mi">2i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="inline_local_variable" class="discrete"><code>inline_local_variable</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/inline_local_variable.rs#L13">inline_local_variable.rs</a></p>
</div>
<div class="paragraph">
<p>Inlines local variable.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="err">┃</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">x</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="introduce_named_lifetime" class="discrete"><code>introduce_named_lifetime</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/introduce_named_lifetime.rs#L12">introduce_named_lifetime.rs</a></p>
</div>
<div class="paragraph">
<p>Change an anonymous lifetime to a named lifetime.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Cursor</span><span class="o">&lt;</span><span class="nv">'_</span><span class="err">┃</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">node</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="n">SyntaxNode</span> <span class="p">{</span>
        <span class="k">match</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Replace</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">node</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">impl</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="n">Cursor</span><span class="o">&lt;</span><span class="nv">'a</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">node</span><span class="p">(</span><span class="k">self</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="o">&amp;</span><span class="n">SyntaxNode</span> <span class="p">{</span>
        <span class="k">match</span> <span class="k">self</span> <span class="p">{</span>
            <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Replace</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Cursor</span><span class="p">::</span><span class="nf">Before</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">node</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="invert_if" class="discrete"><code>invert_if</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/invert_if.rs#L12">invert_if.rs</a></p>
</div>
<div class="paragraph">
<p>Apply invert_if
This transforms if expressions of the form <code>if !x {A} else {B}</code> into <code>if x {B} else {A}</code>
This also works with <code>!=</code>. This assist can only be applied with the cursor
on <code>if</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span><span class="err">┃</span> <span class="o">!</span><span class="n">y</span> <span class="p">{</span> <span class="n">A</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">B</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">y</span> <span class="p">{</span> <span class="n">B</span> <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="n">A</span> <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="make_raw_string" class="discrete"><code>make_raw_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/raw_string.rs#L8">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>r#</code> to a plain string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">"Hello,┃ World!"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello, World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="make_usual_string" class="discrete"><code>make_usual_string</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/raw_string.rs#L50">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Turns a raw string into a plain string.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ "World!""#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">"Hello, </span><span class="se">\"</span><span class="s">World!</span><span class="se">\"</span><span class="s">"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_imports" class="discrete"><code>merge_imports</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/merge_imports.rs#L13">merge_imports.rs</a></p>
</div>
<div class="paragraph">
<p>Merges two imports with a common prefix.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="err">┃</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">;</span>
<span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="n">io</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">fmt</span><span class="p">::</span><span class="n">Formatter</span><span class="p">,</span> <span class="n">io</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="merge_match_arms" class="discrete"><code>merge_match_arms</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/merge_match_arms.rs#L11">merge_match_arms.rs</a></p>
</div>
<div class="paragraph">
<p>Merges identical match arms.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="err">┃</span><span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="nf">Move</span><span class="p">(</span><span class="o">..</span><span class="p">)</span> <span class="p">|</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Stop</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_arm_cond_to_match_guard" class="discrete"><code>move_arm_cond_to_match_guard</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/move_guard.rs#L68">move_guard.rs</a></p>
</div>
<div class="paragraph">
<p>Moves if expression from match arm body into a guard.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="err">┃</span><span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">{</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_bounds_to_where_clause" class="discrete"><code>move_bounds_to_where_clause</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/move_bounds.rs#L10">move_bounds.rs</a></p>
</div>
<div class="paragraph">
<p>Moves inline type bounds to a where clause.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">apply</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="err">┃</span><span class="n">F</span><span class="p">:</span> <span class="nf">FnOnce</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="p">{</span>
    <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">apply</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="n">F</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="k">where</span> <span class="n">F</span><span class="p">:</span> <span class="nf">FnOnce</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">U</span> <span class="p">{</span>
    <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="move_guard_to_arm_body" class="discrete"><code>move_guard_to_arm_body</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/move_guard.rs#L8">move_guard.rs</a></p>
</div>
<div class="paragraph">
<p>Moves match guard into match arm body.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="err">┃</span><span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
            <span class="nf">foo</span><span class="p">()</span>
        <span class="p">},</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="qualify_path" class="discrete"><code>qualify_path</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/qualify_path.rs#L19">qualify_path.rs</a></p>
</div>
<div class="paragraph">
<p>If the name is unresolved, provides all possible qualified paths for it.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="n">HashMap</span><span class="err">┃</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">map</span> <span class="o">=</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="nn">HashMap</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_dbg" class="discrete"><code>remove_dbg</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/remove_dbg.rs#L8">remove_dbg.rs</a></p>
</div>
<div class="paragraph">
<p>Removes <code>dbg!()</code> macro call.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="err">┃</span><span class="nd">dbg!</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="mi">92</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_hash" class="discrete"><code>remove_hash</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/raw_string.rs#L120">raw_string.rs</a></p>
</div>
<div class="paragraph">
<p>Removes a hash from a raw string literal.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r#"Hello,┃ World!"#</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="s">r"Hello, World!"</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_mut" class="discrete"><code>remove_mut</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/remove_mut.rs#L5">remove_mut.rs</a></p>
</div>
<div class="paragraph">
<p>Removes the <code>mut</code> keyword.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Walrus</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">feed</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="err">┃</span> <span class="k">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">impl</span> <span class="n">Walrus</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">feed</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="nb">u32</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="remove_unused_param" class="discrete"><code>remove_unused_param</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/remove_unused_param.rs#L14">remove_unused_param.rs</a></p>
</div>
<div class="paragraph">
<p>Removes unused function parameter.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">i32</span><span class="err">┃</span><span class="p">)</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">frobnicate</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">frobnicate</span><span class="p">()</span> <span class="p">{}</span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">frobnicate</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="reorder_fields" class="discrete"><code>reorder_fields</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/reorder_fields.rs#L11">reorder_fields.rs</a></p>
</div>
<div class="paragraph">
<p>Reorder the fields of record literals and record patterns in the same order as in
the definition.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">i32</span><span class="p">};</span>
<span class="k">const</span> <span class="n">test</span><span class="p">:</span> <span class="n">Foo</span> <span class="o">=</span> <span class="err">┃</span><span class="n">Foo</span> <span class="p">{</span><span class="n">bar</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="nb">i32</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="nb">i32</span><span class="p">};</span>
<span class="k">const</span> <span class="n">test</span><span class="p">:</span> <span class="n">Foo</span> <span class="o">=</span> <span class="n">Foo</span> <span class="p">{</span><span class="n">foo</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">bar</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_derive_with_manual_impl" class="discrete"><code>replace_derive_with_manual_impl</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_derive_with_manual_impl.rs#L19">replace_derive_with_manual_impl.rs</a></p>
</div>
<div class="paragraph">
<p>Converts a <code>derive</code> impl into a manual one.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
</pre></td><td class="code"><pre><span class="nd">#[derive(Deb</span><span class="err">┃</span><span class="nd">ug,</span> <span class="nd">Display)]</span>
<span class="k">struct</span> <span class="n">S</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="nd">#[derive(Display)]</span>
<span class="k">struct</span> <span class="n">S</span><span class="p">;</span>

<span class="k">impl</span> <span class="n">Debug</span> <span class="k">for</span> <span class="n">S</span> <span class="p">{</span>
    <span class="k">fn</span> <span class="nf">fmt</span><span class="p">(</span><span class="o">&amp;</span><span class="k">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="o">&amp;</span><span class="k">mut</span> <span class="n">Formatter</span><span class="p">)</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="nd">todo!</span><span class="p">()}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_if_let_with_match" class="discrete"><code>replace_if_let_with_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_if_let_with_match.rs#L15">replace_if_let_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>if let</code> with an else branch with a <code>match</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">if</span> <span class="k">let</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="o">=</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nf">bar</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_impl_trait_with_generic" class="discrete"><code>replace_impl_trait_with_generic</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_impl_trait_with_generic.rs#L5">replace_impl_trait_with_generic.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>impl Trait</code> function argument with the named generic.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="err">┃</span><span class="k">impl</span> <span class="n">Bar</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="n">foo</span><span class="o">&lt;</span><span class="n">B</span><span class="p">:</span> <span class="n">Bar</span><span class="o">&gt;</span><span class="p">(</span><span class="n">bar</span><span class="p">:</span> <span class="n">B</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_let_with_if_let" class="discrete"><code>replace_let_with_if_let</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_let_with_if_let.rs#L15">replace_let_with_if_let.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>let</code> with an <code>if-let</code>.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="nf">compute</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">compute</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nb">None</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre>
<span class="k">fn</span> <span class="nf">main</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nf">Some</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="nf">compute</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fn</span> <span class="nf">compute</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">Option</span><span class="o">&lt;</span><span class="nb">i32</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nb">None</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_match_with_if_let" class="discrete"><code>replace_match_with_if_let</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_if_let_with_match.rs#L84">replace_if_let_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces a binary <code>match</code> with a wildcard pattern and no guards with an <code>if let</code> expression.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">┃</span><span class="k">match</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="k">=&gt;</span> <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">),</span>
        <span class="mi">_</span> <span class="k">=&gt;</span> <span class="nf">bar</span><span class="p">(),</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Action</span> <span class="p">{</span> <span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span><span class="p">:</span> <span class="nb">u32</span> <span class="p">},</span> <span class="n">Stop</span> <span class="p">}</span>

<span class="k">fn</span> <span class="nf">handle</span><span class="p">(</span><span class="n">action</span><span class="p">:</span> <span class="n">Action</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nn">Action</span><span class="p">::</span><span class="n">Move</span> <span class="p">{</span> <span class="n">distance</span> <span class="p">}</span> <span class="o">=</span> <span class="n">action</span> <span class="p">{</span>
        <span class="nf">foo</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">bar</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_qualified_name_with_use" class="discrete"><code>replace_qualified_name_with_use</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_qualified_name_with_use.rs#L7">replace_qualified_name_with_use.rs</a></p>
</div>
<div class="paragraph">
<p>Adds a use statement for a given fully-qualified name.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">process</span><span class="p">(</span><span class="n">map</span><span class="p">:</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="err">┃</span><span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>

<span class="k">fn</span> <span class="nf">process</span><span class="p">(</span><span class="n">map</span><span class="p">:</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="nb">String</span><span class="p">,</span> <span class="nb">String</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_string_with_char" class="discrete"><code>replace_string_with_char</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_string_with_char.rs#L5">replace_string_with_char.rs</a></p>
</div>
<div class="paragraph">
<p>Replace string with char.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="s">"{┃"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">find</span><span class="p">(</span><span class="sc">'{'</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="replace_unwrap_with_match" class="discrete"><code>replace_unwrap_with_match</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/replace_unwrap_with_match.rs#L18">replace_unwrap_with_match.rs</a></p>
</div>
<div class="paragraph">
<p>Replaces <code>unwrap</code> a <code>match</code> expression. Works for Result and Option.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Result</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">T</span><span class="p">),</span> <span class="nf">Err</span><span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nn">Result</span><span class="p">::</span><span class="nf">Ok</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="err">.┃</span><span class="nf">unwrap</span><span class="p">();</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="k">enum</span> <span class="n">Result</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">E</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="n">T</span><span class="p">),</span> <span class="nf">Err</span><span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="p">}</span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">x</span><span class="p">:</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="nb">i32</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nn">Result</span><span class="p">::</span><span class="nf">Ok</span><span class="p">(</span><span class="mi">92</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">y</span> <span class="o">=</span> <span class="k">match</span> <span class="n">x</span> <span class="p">{</span>
        <span class="nf">Ok</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">=&gt;</span> <span class="n">a</span><span class="p">,</span>
        <span class="err">$</span><span class="mi">0_</span> <span class="k">=&gt;</span> <span class="nd">unreachable!</span><span class="p">(),</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="split_import" class="discrete"><code>split_import</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/split_import.rs#L7">split_import.rs</a></p>
</div>
<div class="paragraph">
<p>Wraps the tail of import into braces.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::</span><span class="err">┃</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">use</span> <span class="nn">std</span><span class="p">::{</span><span class="nn">collections</span><span class="p">::</span><span class="n">HashMap</span><span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="toggle_ignore" class="discrete"><code>toggle_ignore</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/toggle_ignore.rs#L8">toggle_ignore.rs</a></p>
</div>
<div class="paragraph">
<p>Adds <code>#[ignore]</code> attribute to the test.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
</pre></td><td class="code"><pre><span class="err">┃</span><span class="nd">#[test]</span>
<span class="k">fn</span> <span class="n">arithmetics</span> <span class="p">{</span>
    <span class="nd">assert_eq!</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="nd">#[test]</span>
<span class="nd">#[ignore]</span>
<span class="k">fn</span> <span class="n">arithmetics</span> <span class="p">{</span>
    <span class="nd">assert_eq!</span><span class="p">(</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="unwrap_block" class="discrete"><code>unwrap_block</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/unwrap_block.rs#L11">unwrap_block.rs</a></p>
</div>
<div class="paragraph">
<p>This assist removes if&#8230;&#8203;else, for, while and loop control statements to just keep the body.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">true</span> <span class="p">{</span><span class="err">┃</span>
        <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"foo"</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<h3 id="wrap_return_type_in_result" class="discrete"><code>wrap_return_type_in_result</code></h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/assists/src/handlers/wrap_return_type_in_result.rs#L11">wrap_return_type_in_result.rs</a></p>
</div>
<div class="paragraph">
<p>Wrap the function&#8217;s return type into Result.</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="nb">i32</span><span class="err">┃</span> <span class="p">{</span> <span class="mi">42i32</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">i32</span><span class="p">,</span> <span class="err">$</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="mi">_</span><span class="p">}</span><span class="o">&gt;</span> <span class="p">{</span> <span class="nf">Ok</span><span class="p">(</span><span class="mi">42i32</span><span class="p">)</span> <span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="diagnostics"><a class="anchor" href="#diagnostics"></a>Diagnostics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While most errors and warnings provided by rust-analyzer come from the <code>cargo check</code> integration, there&#8217;s a growing number of diagnostics implemented using rust-analyzer&#8217;s own analysis.
These diagnostics don&#8217;t respect <code><mark>[allow]</code> or <code></mark>[deny]</code> attributes yet, but can be turned off using the <code>rust-analyzer.diagnostics.enable</code>, <code>rust-analyzer.diagnostics.enableExperimental</code> or <code>rust-analyzer.diagnostics.disabled</code> settings.</p>
</div>
<div class="sect2">
<h3 id="break-outside-of-loop"><a class="anchor" href="#break-outside-of-loop"></a>break-outside-of-loop</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L245">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if <code>break</code> keyword is used outside of a loop.</p>
</div>
</div>
<div class="sect2">
<h3 id="inactive-code"><a class="anchor" href="#inactive-code"></a>inactive-code</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_def/src/diagnostics.rs#L98">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for code with inactive <code>#[cfg]</code> attributes.</p>
</div>
</div>
<div class="sect2">
<h3 id="incorrect-ident-case"><a class="anchor" href="#incorrect-ident-case"></a>incorrect-ident-case</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L345">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if item name doesn&#8217;t follow <a href="https://doc.rust-lang.org/1.0.0/style/style/naming/README.html">Rust naming convention</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="macro-error"><a class="anchor" href="#macro-error"></a>macro-error</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_def/src/diagnostics.rs#L167">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown for macro expansion errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="mismatched-arg-count"><a class="anchor" href="#mismatched-arg-count"></a>mismatched-arg-count</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L293">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if function is invoked with an incorrect amount of arguments.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-match-arm"><a class="anchor" href="#missing-match-arm"></a>missing-match-arm</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L164">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if <code>match</code> block is missing one or more match arms.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-ok-in-tail-expr"><a class="anchor" href="#missing-ok-in-tail-expr"></a>missing-ok-in-tail-expr</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L189">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if block that should return <code>Result</code> returns a value not wrapped in <code>Ok</code>.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span> <span class="k">-&gt;</span> <span class="n">Result</span><span class="o">&lt;</span><span class="nb">u8</span><span class="p">,</span> <span class="p">()</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="mi">10</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-pat-fields"><a class="anchor" href="#missing-pat-fields"></a>missing-pat-fields</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L115">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if pattern lacks some fields that exist in the corresponding structure.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="nb">u8</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">u8</span> <span class="p">}</span>

<span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">20</span> <span class="p">};</span>

<span class="k">if</span> <span class="k">let</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span> <span class="p">}</span> <span class="o">=</span> <span class="n">a</span> <span class="p">{</span>
    <span class="c">// ...</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-structure-fields"><a class="anchor" href="#missing-structure-fields"></a>missing-structure-fields</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L68">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if record lacks some fields that exist in the corresponding structure.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="rust"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="k">struct</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="nb">u8</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">u8</span> <span class="p">}</span>

<span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">A</span> <span class="p">{</span> <span class="n">a</span><span class="p">:</span> <span class="mi">10</span> <span class="p">};</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-unsafe"><a class="anchor" href="#missing-unsafe"></a>missing-unsafe</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L269">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if operation marked as <code>unsafe</code> is used outside of <code>unsafe</code> function or block.</p>
</div>
</div>
<div class="sect2">
<h3 id="no-such-field"><a class="anchor" href="#no-such-field"></a>no-such-field</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_ty/src/diagnostics.rs#L41">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if created structure does not have field provided in record.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-extern-crate"><a class="anchor" href="#unresolved-extern-crate"></a>unresolved-extern-crate</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_def/src/diagnostics.rs#L43">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover referred extern crate.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-import"><a class="anchor" href="#unresolved-import"></a>unresolved-import</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_def/src/diagnostics.rs#L67">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover imported module.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-module"><a class="anchor" href="#unresolved-module"></a>unresolved-module</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_def/src/diagnostics.rs#L18">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is triggered if rust-analyzer is unable to discover referred module.</p>
</div>
</div>
<div class="sect2">
<h3 id="unresolved-proc-macro"><a class="anchor" href="#unresolved-proc-macro"></a>unresolved-proc-macro</h3>
<div class="paragraph">
<p><strong>Source:</strong> <a href="https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/hir_def/src/diagnostics.rs#L131">diagnostics.rs</a></p>
</div>
<div class="paragraph">
<p>This diagnostic is shown when a procedural macro can not be found. This usually means that
procedural macro support is simply disabled (and hence is only a weak hint instead of an error),
but can also indicate project setup problems.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="editor-features"><a class="anchor" href="#editor-features"></a>Editor Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="vs-code-2"><a class="anchor" href="#vs-code-2"></a>VS Code</h3>
<div class="sect3">
<h4 id="color-configurations"><a class="anchor" href="#color-configurations"></a>Color configurations</h4>
<div class="paragraph">
<p>It is possible to change the foreground/background color of inlay hints.
Just add this to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"workbench.colorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1">// Name of the theme you are currently using</span><span class="w">
    </span><span class="nl">"[Default Dark+]"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.foreground"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#868686f0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.background"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#3d3d3d48"</span><span class="p">,</span><span class="w">

      </span><span class="c1">// Overrides for specific kinds of inlay hints</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.foreground.typeHints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fdb6fdf0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.foreground.paramHints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#fdb6fdf0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rust_analyzer.inlayHints.background.chainingHints"</span><span class="p">:</span><span class="w"> </span><span class="s2">"#6b0c0c81"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="semantic-style-customizations"><a class="anchor" href="#semantic-style-customizations"></a>Semantic style customizations</h4>
<div class="paragraph">
<p>You can customize the look of different semantic elements in the source code.
For example, mutable bindings are underlined by default and you can override this behavior by adding the following section to your <code>settings.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"editor.semanticTokenColorCustomizations"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"*.mutable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"fontStyle"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="c1">// underline is the default</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="special-when-clause-context-for-keybindings"><a class="anchor" href="#special-when-clause-context-for-keybindings"></a>Special <code>when</code> clause context for keybindings.</h4>
<div class="paragraph">
<p>You may use <code>inRustProject</code> context to configure keybindings for rust projects only.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ctrl+i"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rust-analyzer.toggleInlayHints"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"when"</span><span class="p">:</span><span class="w"> </span><span class="s2">"inRustProject"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>More about <code>when</code> clause contexts <a href="https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="setting-runnable-environment-variables"><a class="anchor" href="#setting-runnable-environment-variables"></a>Setting runnable environment variables</h4>
<div class="paragraph">
<p>You can use "rust-analyzer.runnableEnv" setting to define runnable environment-specific substitution variables.
The simplest way for all runnables in a bunch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnableEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"RUN_SLOW_TESTS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or it is possible to specify vars more granularly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="jsonc"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="nl">"rust-analyzer.runnableEnv"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="c1">// "mask": null, // null mask means that this rule will be applied for all runnables</span><span class="w">
        </span><span class="na">env</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
             </span><span class="nl">"APP_DATA"</span><span class="p">:</span><span class="w"> </span><span class="s2">"asdf"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test_name"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"env"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
             </span><span class="nl">"APP_ID"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"> </span><span class="c1">// overwrites only APP_ID</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use any valid regular expression as a mask.
Also note that a full runnable name is something like <strong>run bin_or_example_name</strong>, <strong>test some::mod::test_name</strong> or <strong>test-mod some::mod</strong>, so it is possible to distinguish binaries, single tests, and test modules with this masks: <code>"^run"</code>, <code>"^test "</code> (the trailing space matters!), and <code>"^test-mod"</code> respectively.</p>
</div>
</div>
<div class="sect3">
<h4 id="compiler-feedback-from-external-commands"><a class="anchor" href="#compiler-feedback-from-external-commands"></a>Compiler feedback from external commands</h4>
<div class="paragraph">
<p>Instead of relying on the built-in <code>cargo check</code>, you can configure Code to run a command in the background and use the <code>$rustc-watch</code> problem matcher to generate inline error markers from its output.</p>
</div>
<div class="paragraph">
<p>To do this you need to create a new <a href="https://code.visualstudio.com/docs/editor/tasks">VS Code Task</a> and set <code>rust-analyzer.checkOnSave.enable: false</code> in preferences.</p>
</div>
<div class="paragraph">
<p>For example, if you want to run <a href="https://crates.io/crates/cargo-watch"><code>cargo watch</code></a> instead, you might add the following to <code>.vscode/tasks.json</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"build"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"shell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"command"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cargo watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"problemMatcher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"$rustc-watch"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"isBackground"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>

  </main>

  <footer>
    <div id="footer-inner">
      <div class="footer-by">
        <a href="https://ferrous-systems.com/">
          <img class="ferrous-logo" src="/assets/ferrous-logo.png">Ferrous Systems</a>
        &
        <a href="https://github.com/rust-analyzer/rust-analyzer/graphs/contributors">contributors</a>
      </div>

      <div id="footer-links">
        <a href="/feed.xml" class="footer-link">
          <i class="fa fa-rss"></i> rss
        </a>
        <a href="https://github.com/rust-analyzer/rust-analyzer.github.io" class="footer-link">
          <i class="fa fa-github"></i> src
        </a>
        <a href="https://opencollective.com/rust-analyzer/" class="footer-link">
          <i class="fa fa-github"></i> sponsor
        </a>
      </div>
    </div>
  </footer>
</body>

</html>
